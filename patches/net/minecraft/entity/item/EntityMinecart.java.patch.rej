++++ REJECTED PATCH 1
     @SideOnly(Side.CLIENT)
     private double field_70506_as;
 
+    /* Forge: Minecart Compatibility Layer Integration. */
+    public static float defaultMaxSpeedAirLateral = 0.4f;
+    public static float defaultMaxSpeedAirVertical = -1f;
+    public static double defaultDragAir = 0.94999998807907104D;
+    protected boolean canUseRail = true;
+    protected boolean canBePushed = true;
+    private static net.minecraftforge.common.IMinecartCollisionHandler collisionHandler = null;
+
+    /* Instance versions of the above physics properties */
+    private float currentSpeedRail = getMaxCartSpeedOnRail();
+    protected float maxSpeedAirLateral = defaultMaxSpeedAirLateral;
+    protected float maxSpeedAirVertical = defaultMaxSpeedAirVertical;
+    protected double dragAir = defaultDragAir;
+
     public EntityMinecart(World p_i1712_1_)
     {
         super(p_i1712_1_);
++++ END PATCH
++++ REJECTED PATCH 2
     @Nullable
     public AxisAlignedBB func_70114_g(Entity p_70114_1_)
     {
+        if (getCollisionHandler() != null) return getCollisionHandler().getCollisionBox(this, p_70114_1_);
         return p_70114_1_.func_70104_M() ? p_70114_1_.func_174813_aQ() : null;
     }
 
     @Nullable
     public AxisAlignedBB func_70046_E()
     {
+        if (getCollisionHandler() != null) return getCollisionHandler().getBoundingBox(this);
         return null;
     }
 
     public boolean func_70104_M()
     {
-        return true;
+        return canBePushed;
     }
 
     public EntityMinecart(World p_i1713_1_, double p_i1713_2_, double p_i1713_4_, double p_i1713_6_)
++++ END PATCH
++++ REJECTED PATCH 3
             BlockPos blockpos = new BlockPos(k, l, i1);
             IBlockState iblockstate = this.field_70170_p.func_180495_p(blockpos);
 
-            if (BlockRailBase.func_176563_d(iblockstate))
+            if (canUseRail() && BlockRailBase.func_176563_d(iblockstate))
             {
                 this.func_180460_a(blockpos, iblockstate);
 
++++ END PATCH
++++ REJECTED PATCH 4
 
             this.func_70101_b(this.field_70177_z, this.field_70125_A);
 
-            if (this.func_184264_v() == EntityMinecart.Type.RIDEABLE && this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y > 0.01D)
+            AxisAlignedBB box;
+            if (getCollisionHandler() != null) box = getCollisionHandler().getMinecartCollisionBox(this);
+            else                               box = this.func_174813_aQ().func_72314_b(0.20000000298023224D, 0.0D, 0.20000000298023224D);
+
+            if (canBeRidden() && this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y > 0.01D)
             {
-                List<Entity> list = this.field_70170_p.func_175674_a(this, this.func_174813_aQ().func_72314_b(0.20000000298023224D, 0.0D, 0.20000000298023224D), EntitySelectors.func_188442_a(this));
+                List<Entity> list = this.field_70170_p.func_175674_a(this, box, EntitySelectors.func_188442_a(this));
 
                 if (!list.isEmpty())
                 {
++++ END PATCH
++++ REJECTED PATCH 5
             }
             else
             {
-                for (Entity entity : this.field_70170_p.func_72839_b(this, this.func_174813_aQ().func_72314_b(0.20000000298023224D, 0.0D, 0.20000000298023224D)))
+                for (Entity entity : this.field_70170_p.func_72839_b(this, box))
                 {
                     if (!this.func_184196_w(entity) && entity.func_70104_M() && entity instanceof EntityMinecart)
                     {
++++ END PATCH
++++ REJECTED PATCH 6
             }
 
             this.func_70072_I();
+            net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.minecart.MinecartUpdateEvent(this, this.getCurrentRailPosition()));
         }
     }
 
++++ END PATCH
++++ REJECTED PATCH 7
 
     protected void func_180459_n()
     {
-        double d0 = this.func_174898_m();
+        double d0 = field_70122_E ? this.func_174898_m() : getMaxSpeedAirLateral();
         this.field_70159_w = MathHelper.func_151237_a(this.field_70159_w, -d0, d0);
         this.field_70179_y = MathHelper.func_151237_a(this.field_70179_y, -d0, d0);
 
+        double moveY = field_70181_x;
+        if(getMaxSpeedAirVertical() > 0 && field_70181_x > getMaxSpeedAirVertical())
+        {
+            moveY = getMaxSpeedAirVertical();
+            if(Math.abs(field_70159_w) < 0.3f && Math.abs(field_70179_y) < 0.3f)
+            {
+                moveY = 0.15f;
+                field_70181_x = moveY;
+            }
+        }
+
         if (this.field_70122_E)
         {
             this.field_70159_w *= 0.5D;
++++ END PATCH
++++ REJECTED PATCH 8
             this.field_70179_y *= 0.5D;
         }
 
-        this.func_70091_d(MoverType.SELF, this.field_70159_w, this.field_70181_x, this.field_70179_y);
+        this.func_70091_d(MoverType.SELF, this.field_70159_w, moveY, this.field_70179_y);
 
         if (!this.field_70122_E)
         {
-            this.field_70159_w *= 0.949999988079071D;
-            this.field_70181_x *= 0.949999988079071D;
-            this.field_70179_y *= 0.949999988079071D;
+            this.field_70159_w *= getDragAir();
+            this.field_70181_x *= getDragAir();
+            this.field_70179_y *= getDragAir();
         }
     }
 
++++ END PATCH
++++ REJECTED PATCH 9
             flag1 = !flag;
         }
 
-        double d0 = 0.0078125D;
-        BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = (BlockRailBase.EnumRailDirection)p_180460_2_.func_177229_b(blockrailbase.func_176560_l());
+        double slopeAdjustment = getSlopeAdjustment();
+        BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = blockrailbase.getRailDirection(field_70170_p, p_180460_1_, p_180460_2_, this);
 
         switch (blockrailbase$enumraildirection)
         {
             case ASCENDING_EAST:
-                this.field_70159_w -= 0.0078125D;
+                this.field_70159_w -= slopeAdjustment;
                 ++this.field_70163_u;
                 break;
             case ASCENDING_WEST:
-                this.field_70159_w += 0.0078125D;
+                this.field_70159_w += slopeAdjustment;
                 ++this.field_70163_u;
                 break;
             case ASCENDING_NORTH:
-                this.field_70179_y += 0.0078125D;
+                this.field_70179_y += slopeAdjustment;
                 ++this.field_70163_u;
                 break;
             case ASCENDING_SOUTH:
-                this.field_70179_y -= 0.0078125D;
+                this.field_70179_y -= slopeAdjustment;
                 ++this.field_70163_u;
         }
 
++++ END PATCH
++++ REJECTED PATCH 10
             }
         }
 
-        if (flag1)
+        if (flag1 && shouldDoRailFunctions())
         {
             double d17 = Math.sqrt(this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y);
 
++++ END PATCH
++++ REJECTED PATCH 11
         this.field_70165_t = d18 + d1 * d10;
         this.field_70161_v = d19 + d2 * d10;
         this.func_70107_b(this.field_70165_t, this.field_70163_u, this.field_70161_v);
-        double d22 = this.field_70159_w;
-        double d23 = this.field_70179_y;
+        this.moveMinecartOnRail(p_180460_1_);
 
-        if (this.func_184207_aI())
-        {
-            d22 *= 0.75D;
-            d23 *= 0.75D;
-        }
-
-        double d13 = this.func_174898_m();
-        d22 = MathHelper.func_151237_a(d22, -d13, d13);
-        d23 = MathHelper.func_151237_a(d23, -d13, d13);
-        this.func_70091_d(MoverType.SELF, d22, 0.0D, d23);
-
         if (aint[0][1] != 0 && MathHelper.func_76128_c(this.field_70165_t) - p_180460_1_.func_177958_n() == aint[0][0] && MathHelper.func_76128_c(this.field_70161_v) - p_180460_1_.func_177952_p() == aint[0][2])
         {
             this.func_70107_b(this.field_70165_t, this.field_70163_u + (double)aint[0][1], this.field_70161_v);
++++ END PATCH
++++ REJECTED PATCH 12
             this.field_70179_y = d5 * (double)(i - p_180460_1_.func_177952_p());
         }
 
-        if (flag)
+
+        if(shouldDoRailFunctions())
         {
+            ((BlockRailBase)p_180460_2_.func_177230_c()).onMinecartPass(field_70170_p, this, p_180460_1_);
+        }
+
+        if (flag && shouldDoRailFunctions())
+        {
             double d15 = Math.sqrt(this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y);
 
             if (d15 > 0.01D)
++++ END PATCH
++++ REJECTED PATCH 13
 
         if (BlockRailBase.func_176563_d(iblockstate))
         {
-            BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = (BlockRailBase.EnumRailDirection)iblockstate.func_177229_b(((BlockRailBase)iblockstate.func_177230_c()).func_176560_l());
+            BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = ((BlockRailBase)iblockstate.func_177230_c()).getRailDirection(field_70170_p, new BlockPos(i, j, k), iblockstate, this);
             p_70495_3_ = (double)j;
 
             if (blockrailbase$enumraildirection.func_177018_c())
++++ END PATCH
++++ REJECTED PATCH 14
 
         if (BlockRailBase.func_176563_d(iblockstate))
         {
-            BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = (BlockRailBase.EnumRailDirection)iblockstate.func_177229_b(((BlockRailBase)iblockstate.func_177230_c()).func_176560_l());
+            BlockRailBase.EnumRailDirection blockrailbase$enumraildirection = ((BlockRailBase)iblockstate.func_177230_c()).getRailDirection(field_70170_p, new BlockPos(i, j, k), iblockstate, this);
             int[][] aint = field_70500_g[blockrailbase$enumraildirection.func_177015_a()];
             double d0 = (double)i + 0.5D + (double)aint[0][0] * 0.5D;
             double d1 = (double)j + 0.0625D + (double)aint[0][1] * 0.5D;
++++ END PATCH
++++ REJECTED PATCH 15
 
     public void func_70108_f(Entity p_70108_1_)
     {
+        net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.minecart.MinecartCollisionEvent(this, p_70108_1_));
+        if (getCollisionHandler() != null)
+        {
+            getCollisionHandler().onEntityCollision(this, p_70108_1_);
+            return;
+        }
         if (!this.field_70170_p.field_72995_K)
         {
             if (!p_70108_1_.field_70145_X && !this.field_70145_X)
++++ END PATCH
++++ REJECTED PATCH 16
                             double d7 = p_70108_1_.field_70159_w + this.field_70159_w;
                             double d8 = p_70108_1_.field_70179_y + this.field_70179_y;
 
-                            if (((EntityMinecart)p_70108_1_).func_184264_v() == EntityMinecart.Type.FURNACE && this.func_184264_v() != EntityMinecart.Type.FURNACE)
+                            if (((EntityMinecart)p_70108_1_).isPoweredCart() && !isPoweredCart())
                             {
                                 this.field_70159_w *= 0.20000000298023224D;
                                 this.field_70179_y *= 0.20000000298023224D;
++++ END PATCH
++++ REJECTED PATCH 17
                                 p_70108_1_.field_70159_w *= 0.949999988079071D;
                                 p_70108_1_.field_70179_y *= 0.949999988079071D;
                             }
-                            else if (((EntityMinecart)p_70108_1_).func_184264_v() != EntityMinecart.Type.FURNACE && this.func_184264_v() == EntityMinecart.Type.FURNACE)
+                            else if (!((EntityMinecart)p_70108_1_).isPoweredCart() && isPoweredCart())
                             {
                                 p_70108_1_.field_70159_w *= 0.20000000298023224D;
                                 p_70108_1_.field_70179_y *= 0.20000000298023224D;
++++ END PATCH
